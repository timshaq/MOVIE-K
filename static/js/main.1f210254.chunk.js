(this["webpackJsonpMOVIE-K"]=this["webpackJsonpMOVIE-K"]||[]).push([[0],{10:function(e,t,s){"use strict";s.r(t);var a=s(0),o=s.n(a),i=s(2),l=s.n(i);class n extends o.a.Component{constructor(){super(),this.toggleLike=()=>{this.setState({like:!this.state.like}),this.state.like?this.props.delWishList(this.props.mov):this.props.addWishList(this.props.mov)},this.state={like:!1}}render(){return o.a.createElement("div",{className:"col-xl-3 col-lg-3 col-md-4 col-sm-6 col-xs-12 mb-4"},o.a.createElement("div",{className:"card"},o.a.createElement("img",{className:"card-img-top card-image",src:(()=>null===this.props.mov.poster_path?null===this.props.mov.backdrop_path?"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcRX9AXxMT93fG0ievw-NwSDqwg-Hkerpfdc1FRyP2gP2Vo6_wZf":"https://image.tmdb.org/t/p/w500".concat(this.props.mov.backdrop_path):"https://image.tmdb.org/t/p/w500".concat(this.props.mov.poster_path))(),alt:this.props.mov.title}),o.a.createElement("div",{className:"card-body"},o.a.createElement("h6",{className:"card-title"},this.props.mov.title),o.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},o.a.createElement("p",{className:"mb-0"},"Rating: ",this.props.mov.vote_average),o.a.createElement("button",{className:this.state.like?"btn btn-success":"btn btn-secondary",type:"button",onClick:this.toggleLike},this.state.like?"Remove":"Add"))),o.a.createElement("button",{className:"btn",type:"button",onClick:()=>{this.props.delMovie(this.props.mov)}},"Delete")))}}var r=n;class c extends o.a.Component{constructor(){super(),this.togglePopup=()=>{this.setState({popup:!this.state.popup})},this.closePopup=()=>{this.state.popup&&this.togglePopup()},this.state={popup:!1}}render(){return o.a.createElement("div",{className:"wish-list"},o.a.createElement("div",{className:"star-container",onClick:this.togglePopup,title:"\u0411\u0443\u0434\u0443 \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"},o.a.createElement("img",{src:"http://frontend-shakirov.online/star.png",alt:"",className:"star-container__img"}),o.a.createElement("span",{className:"star-container__counter"},this.props.wishLength)),o.a.createElement("div",{className:this.state.popup?"wish-list__popup":"d-none",onClick:this.closePopup},o.a.createElement("div",{className:"popup__block"},o.a.createElement("img",{src:"http://frontend-shakirov.online/img/close-form.png",alt:"Close",className:"block__close",onClick:this.togglePopup}),o.a.createElement("h4",{className:""},"en-US"===this.props.lang?"Will Watch":"\u0411\u0443\u0434\u0443 \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c",": ",this.props.wishLength," ",this.props.wishLength>1?"movies":"movie"," "),o.a.createElement("ul",{className:"list-group"},this.props.moviesWillWatch.map((e,t)=>o.a.createElement("li",{className:"list-group-item"},o.a.createElement("div",{className:"d-flex justify-content-between"},o.a.createElement("div",null,e.title),o.a.createElement("div",null,e.rate))))))))}}var p=c;var m=({sortBy:e,updateSortBy:t,updateLang:s})=>{const a=e=>()=>{t(e)},i=t=>"cursor-pointer nav-link ".concat(e.sort===t?"active":""),l=e=>()=>{s(e)};return o.a.createElement("div",{className:"d-flex justify-content-between"},o.a.createElement("ul",{className:"tabs nav nav-pills col-9"},o.a.createElement("li",{className:"nav-item"},o.a.createElement("div",{className:i("popularity.desc"),onClick:a("popularity.desc")},"en-US"===e.lang?"Popularity desc":"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435")),o.a.createElement("li",{className:"nav-item"},o.a.createElement("div",{className:i("revenue.desc"),onClick:a("revenue.desc")},"en-US"===e.lang?"Revenue desc":"\u041a\u0430\u0441\u0441\u043e\u0432\u044b\u0435")),o.a.createElement("li",{className:"nav-item"},o.a.createElement("div",{className:i("vote_average.desc"),onClick:a("vote_average.desc")},"en-US"===e.lang?"Vote average desc":"\u0412\u044b\u0441\u0448\u0430\u044f \u043e\u0446\u0435\u043d\u043a\u0430"))),o.a.createElement("ul",{className:"tabs nav nav-pills border rounded tab--lang"},o.a.createElement("li",{className:"nav-item"},o.a.createElement("div",{className:"ru-RU"===e.lang?"btn btn-success":"btn",onClick:l("ru-RU")},"RU")),o.a.createElement("li",{className:"nav-item"},o.a.createElement("button",{className:"en-US"===e.lang?"btn btn-success":"btn",onClick:l("en-US")},"EN"))))};var h=({total_pages:e,counter_page:t,getNextPage:s,getPrevPage:a})=>o.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},o.a.createElement("button",{type:"button",disabled:1===t?"disabled":"",className:"btn ".concat(1!==t?"btn-link":""),onClick:a},"Back"),o.a.createElement("span",null,t,"/",e),o.a.createElement("button",{type:"button",disabled:t===e?"disabled":"",className:"btn ".concat(t!==e?"btn-link":""),onClick:s},"Next"));class g extends o.a.Component{constructor(){console.log("constructor"),super(),this.getMovies=()=>{let e=this.state.sort_by.lang.replace(/[a-z]{2}-/,"");fetch("".concat("https://api.themoviedb.org/3","/discover/movie?api_key=").concat("5d7542fd7eea437fab750e1b20a78df3","&sort_by=").concat(this.state.sort_by.sort,"&language=").concat(this.state.sort_by.lang,"&region=").concat(e,"&page=").concat(this.state.sort_by.counter_page)).then(e=>e.json()).then(e=>{console.log("data"),console.log(e),this.setState({movies:e.results,total_pages:e.total_pages})})},this.delMovie=e=>{const t=this.state.movies.filter((function(t){return t.id!==e.id}));this.setState({movies:t})},this.addWishList=e=>{this.setState({moviesWillWatch:[...this.state.moviesWillWatch,{id:e.id,title:e.title,rate:e.vote_average}]})},this.delWishList=e=>{const t=this.state.moviesWillWatch.filter((function(t){return t.id!==e.id}));this.setState({moviesWillWatch:t})},this.updateSortBy=e=>{this.setState({sort_by:{lang:this.state.sort_by.lang,sort:e,counter_page:1}})},this.updateLang=e=>{this.setState({sort_by:{lang:e,sort:this.state.sort_by.sort,counter_page:this.state.sort_by.counter_page}})},this.getNextPage=()=>{this.setState({sort_by:{lang:this.state.sort_by.lang,sort:this.state.sort_by.sort,counter_page:this.state.sort_by.counter_page+1}})},this.getPrevPage=()=>{this.setState({sort_by:{lang:this.state.sort_by.lang,sort:this.state.sort_by.sort,counter_page:this.state.sort_by.counter_page-1}})},this.state={movies:[],moviesWillWatch:[],sort_by:{lang:"en-US",sort:"popularity.desc",counter_page:1},total_pages:""}}componentDidMount(){console.log("DidMount"),this.getMovies()}componentDidUpdate(e,t){t.sort_by!==this.state.sort_by&&this.getMovies()}render(){return console.log("render"),o.a.createElement(d,{state:this.state,addWishList:this.addWishList,delWishList:this.delWishList,delMovie:this.delMovie,sortBy:this.state.sort_by,updateSortBy:this.updateSortBy,updateLang:this.updateLang,total_pages:this.state.total_pages,counter_page:this.state.sort_by.counter_page,getNextPage:this.getNextPage,getPrevPage:this.getPrevPage})}}class d extends o.a.Component{render(){const e=this.props.state;let t=e.moviesWillWatch.length;return console.log("this.state:"),console.log(this.props.state),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row mt-4"},o.a.createElement("div",{className:"col-12"},o.a.createElement("div",{className:"row mb-4"},o.a.createElement("div",{className:"col-12"},o.a.createElement(m,{sortBy:e.sort_by,updateSortBy:this.props.updateSortBy,updateLang:this.props.updateLang}))),o.a.createElement("div",{className:"row mb-4"},o.a.createElement("div",{className:"col-12"},o.a.createElement(h,{total_pages:e.total_pages,counter_page:e.sort_by.counter_page,getNextPage:this.props.getNextPage,getPrevPage:this.props.getPrevPage}))),o.a.createElement("div",{className:"row"},e.movies.map((t,s)=>o.a.createElement(r,{mov:t,key:t.id,wish:e.moviesWillWatch,addWishList:this.props.addWishList,delWishList:this.props.delWishList,delMovie:this.props.delMovie}))),o.a.createElement("div",{className:"row mb-4"},o.a.createElement("div",{className:"col-12"},o.a.createElement(h,{total_pages:e.total_pages,counter_page:e.sort_by.counter_page,getNextPage:this.props.getNextPage,getPrevPage:this.props.getPrevPage})))),o.a.createElement(p,{moviesWillWatch:e.moviesWillWatch,lang:e.sort_by.lang,wishLength:t})))}}var v=g;s(8),s(9);l.a.render(o.a.createElement(v,null),document.getElementById("root"))},3:function(e,t,s){e.exports=s(10)},9:function(e,t,s){}},[[3,1,2]]]);
//# sourceMappingURL=main.1f210254.chunk.js.map